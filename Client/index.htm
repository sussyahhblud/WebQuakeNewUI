<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="user-scalable=no">
<title>WebQuake Launcher</title>
<link rel="shortcut icon" href="data:image/gif;base64,
R0lGODlhMAAwANUAAHNzAFBQAP//1NySALl6AJZiAHNKAFAyAP+qJf+4SP/Ujv/isf/j1FAZAP/Hsf9z
SP+Pa/+rjv+Ojra2tp6enpKSkoaGhnp6em5ubmJiYlZWVkpKSj4+PjIyMiYmJhoaGg4ODgAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAMAAwAAAG/8CQcEgsGo/IJJJDZCqfUCOn4iF6Ks6o
dkk1XrPbsBCzQW4w4nSmk0Guq+ltuX1sl+PaskZ5P4JAeENlaCEVFhYVYyF9QiAfjxscjx+AcRsdE4tC
ZRMdfR8eHh0cGxsZGqUcHaEfYmVsF0IXa5ogHqQbqBoZFxYYuqkelXlmIaOlGckZGIeHGMoZqR3DUKFE
1iEHptEHBxwaGAW+Ghzd2xsHrWEboYzfEOkd3eDPGhrdHR8HEOTq64wfSnlooC+XqV/RUKVr4KGUPzkA
D3h45AkZuAwFopXKBypdGmxC9E0E1UGeKnuRDpQc6cFjoJASQYEKRbMmq4ktH+IRidNAgf8C4X4C/WkA
Z86XMDke8PkgwoIIERxEeFDAQLoP8nTG0cex6tICUyFA8OqTosuXM/UV6NaRgNWJ3tamRRpCpD4IVKsS
gFr15wN4HbWmsWugaQSxEQQ8RTzVQGC6aQ/8VTAWAgMHlSk/SMcKcsyvYw1o+KnBZ2jOZwO1VBWg9M9n
yIIuZVdOsJiWZ54ZEI1RaAbRBxDesx2GawaxZCEcfmAVI4YIFmpX64DEUSht9i6s3WBB7IXdBDAgjInE
UwgOEDBQygdiwAACcrtxaIgBfgGxyO9HGyXRg0/3BYACggazbAABARPlc4B7A8i12iMciPfAhBQWOFE5
ExlAAIBYgXD/HBnQSTRNAQQggIBbRj1ySwYPzMILARlIQhFOJHK4SlMgUqCSMD9t+J5VKqrYgVXyvDXJ
JB6QaOJ7onigHBkQSNDfByQSsKGVVdV25JZbfuXekgT0Z0EEZPTy2YYIfOkelrvtFlMDS7UJHoNWpunW
Ixdxh0WGX5roJ4NLNthNXAwWmuYAYDr2AUoaQEABOyDU6CcCCZiYwKWYNribkphWiuikP9piwQW5jAqp
hlb6OCmlmQpVAKKYgpqqlQbYcgE/4MwyDaprzppqofb5uGavvroFQgcP+CKeeAeAgKqvQlkVF374MdeN
T1VemWqtEV7gbTIYSIKqXmwC4Ca2chK1kmmP79FaVUAu6hLNB8/O+qmdXg16rapr9rjtohfcE8k3Gvin
7aw1frrWAQwthWaherXrVgcYkNrQKLsY7C+Wr74HoLRf+SisvT9SHE1DouwypFvZIlwVUxRO+LJPVhJ7
ogEUa7DKzhnT/J6/uwVwrauuDrrprODh/MzOnmBQVL01A/rjAQFUbbWXhyKsYVGNXhIEADs=">
<style type="text/css">
canvas {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 1001;
    background: black;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: linear-gradient(145deg, #1a1a1a 0%, #0d1117 50%, #1a1a1a 100%);
    color: #e1e1e1;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100vh;
    overflow: hidden;
}

.launcher-container {
    display: flex;
    height: 100vh;
    position: relative;
    z-index: 1000;
}

.sidebar {
    width: 320px;
    background: rgba(17, 24, 35, 0.95);
    border-right: 1px solid #30363d;
    padding: 0;
    overflow-y: auto;
}

.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle at center, rgba(150, 111, 51, 0.1) 0%, transparent 70%);
}

.section {
    border-bottom: 1px solid #30363d;
}

.section-header {
    background: #21262d;
    color: #966f33;
    padding: 12px 16px;
    font-size: 11px;
    font-weight: bold;
    letter-spacing: 1px;
    text-transform: uppercase;
    border: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background-color 0.2s;
}

.section-header:hover {
    background: #2d333b;
}

.section-header .arrow {
    transition: transform 0.2s;
}

.section-header.collapsed .arrow {
    transform: rotate(-90deg);
}

.section-content {
    background: #161b22;
    padding: 0;
    transition: max-height 0.3s ease;
    overflow: hidden;
}

.section-content.collapsed {
    max-height: 0 !important;
}

.game-item, .option-item {
    padding: 8px 16px;
    border-bottom: 1px solid #30363d;
    color: #e1e1e1;
    font-size: 13px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.game-item:hover {
    background: #2d333b;
}

.game-item.selected {
    background: #0969da;
    color: white;
}

.option-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.checkbox {
    width: 14px;
    height: 14px;
    border: 1px solid #30363d;
    background: #21262d;
    border-radius: 2px;
    position: relative;
    cursor: pointer;
}

.checkbox.checked::after {
    content: '✓';
    position: absolute;
    top: -2px;
    left: 1px;
    color: #e1e1e1;
    font-size: 12px;
    font-weight: bold;
}

.start-button {
    background: #238636;
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
    margin: 16px;
    border-radius: 4px;
    width: calc(100% - 32px);
}

.start-button:hover {
    background: #2ea043;
}

.start-button:disabled {
    background: #656d76;
    cursor: not-allowed;
}

.logo-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.logo {
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, #966f33 0%, #5a3f1a 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 80px;
    font-weight: bold;
    color: #000;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    box-shadow: 0 0 30px rgba(150, 111, 51, 0.3), inset 0 0 30px rgba(0,0,0,0.3);
}

.footer {
    position: fixed;
    bottom: 10px;
    left: 320px;
    right: 10px;
    text-align: center;
    font-size: 12px;
    color: #7d8590;
    z-index: 1000;
}

.footer a {
    color: #966f33;
    text-decoration: none;
    margin: 0 10px;
}

.footer a:hover {
    color: #e1e1e1;
    text-decoration: underline;
}

.download-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    flex-direction: column;
    gap: 20px;
}

.download-content {
    text-align: center;
    color: white;
}

.download-button {
    background: #966f33;
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.download-button:hover {
    background: #b8834d;
}

.download-button:disabled {
    background: #656d76;
    cursor: not-allowed;
}

.download-status {
    margin-top: 15px;
    font-size: 14px;
}

.hidden {
    display: none !important;
}

#end1, #end2 {
    background-color: maroon;
    white-space: pre;
}
</style>
</head>
<body>
<div class="launcher-container">
    <div class="sidebar">
        <div class="section">
            <button class="section-header" onclick="toggleSection(event, 'games')">
                <span>♦ GAMES</span>
                <span class="arrow">▼</span>
            </button>
            <div class="section-content" id="games-content">
                <div class="game-item selected" data-game="quake">Quake</div>
            </div>
        </div>
        
        <div class="section">
            <button class="section-header" onclick="toggleSection(event, 'options')">
                <span>♦ LAUNCH OPTIONS</span>
                <span class="arrow">▼</span>
            </button>
            <div class="section-content" id="options-content">
                <div class="option-item">
                    <div class="checkbox" id="fullscreen-checkbox" onclick="toggleFullscreen()"></div>
                    <span>Fullscreen</span>
                </div>
            </div>
        </div>
        
        <div class="section">
            <button class="section-header" onclick="toggleSection(event, 'start')">
                <span>♦ START</span>
                <span class="arrow">▼</span>
            </button>
            <div class="section-content" id="start-content">
                <button class="start-button" id="startButton" onclick="startGame()">Start</button>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <div class="logo-container">
            <div class="logo">Q</div>
        </div>
    </div>
</div>

<div class="footer">
    <a href="#" onclick="showInstructions()">Instructions</a> |
    <a href="https://github.com/sussyahhblud/WebQuake" target="_blank">GitHub</a> |
    <a href="#" onclick="showXashXT()">XashXT</a>
</div>

<div id="downloadOverlay" class="download-overlay hidden">
    <div class="download-content">
        <h2>Download Quake Data</h2>
        <p>Game data files are required to play Quake.</p>
        <button id="downloadButton" class="download-button" onclick="downloadQuakeData()">Download Quake Data</button>
        <div id="downloadStatus" class="download-status"></div>
    </div>
</div>

<script src="download.js"></script>
<script>
let fullscreenEnabled = false;
let gameStarted = false;

// Initialize sections to be open by default
document.addEventListener('DOMContentLoaded', function() {
    // Set initial heights for sections to be expanded by default
    const sections = ['games', 'options', 'start'];
    sections.forEach(section => {
        const content = document.getElementById(section + '-content');
        const header = document.querySelector(`[onclick*="${section}"]`);
        if (content && header) {
            // Ensure section is expanded and header is not marked as collapsed
            content.classList.remove('collapsed');
            header.classList.remove('collapsed');
            content.style.maxHeight = content.scrollHeight + 'px';
        }
    });
    
    // Check if game data exists
    checkGameDataExists();
});

function toggleSection(event, sectionName) {
    const content = document.getElementById(sectionName + '-content');
    const header = event.target.closest('.section-header');
    
    if (content.classList.contains('collapsed')) {
        content.classList.remove('collapsed');
        content.style.maxHeight = content.scrollHeight + 'px';
        header.classList.remove('collapsed');
    } else {
        content.classList.add('collapsed');
        content.style.maxHeight = '0';
        header.classList.add('collapsed');
    }
}

function toggleFullscreen() {
    const checkbox = document.getElementById('fullscreen-checkbox');
    fullscreenEnabled = !fullscreenEnabled;
    
    if (fullscreenEnabled) {
        checkbox.classList.add('checked');
    } else {
        checkbox.classList.remove('checked');
    }
}

function startGame() {
    // Check if game data exists first
    fetch('/id1/pak0.pak', { method: 'HEAD' })
        .then(function(response) {
            if (response.ok) {
                // Game data exists, start the game
                launchQuake();
            } else {
                // Game data doesn't exist, show download overlay
                document.getElementById('downloadOverlay').classList.remove('hidden');
            }
        })
        .catch(function() {
            // Game data doesn't exist, show download overlay
            document.getElementById('downloadOverlay').classList.remove('hidden');
        });
}

function launchQuake() {
    console.log('Launching Quake with fullscreen:', fullscreenEnabled);
    
    // Hide the launcher interface
    document.querySelector('.launcher-container').style.display = 'none';
    document.querySelector('.footer').style.display = 'none';
    
    // Apply fullscreen if enabled
    if (fullscreenEnabled && !gameStarted) {
        // Request fullscreen for the document
        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
        } else if (document.documentElement.webkitRequestFullscreen) {
            document.documentElement.webkitRequestFullscreen();
        } else if (document.documentElement.msRequestFullscreen) {
            document.documentElement.msRequestFullscreen();
        }
    }
    
    gameStarted = true;
    
    // Reload the page to let WebQuake initialize naturally from page load
    window.location.reload();
}

function checkGameDataExists() {
    fetch('/id1/pak0.pak', { method: 'HEAD' })
        .then(function(response) {
            if (!response.ok) {
                console.log('Game data not found, ready to download');
            } else {
                console.log('Game data found, ready to start');
            }
        })
        .catch(function() {
            console.log('Game data not found, ready to download');
        });
}

function showInstructions() {
    alert('WebQuake Instructions:\n\n1. Click "Start" to begin\n2. If game data is missing, it will be downloaded automatically\n3. Use the fullscreen option for better experience\n4. Standard Quake controls apply (WASD, mouse look, etc.)');
}

function showXashXT() {
    alert('XashXT Engine\n\nExtended version of the Xash3D engine\nFor more information, visit xash.su');
}

// Check periodically if the game canvas is visible
function checkGameLoaded() {
    var canvas = document.getElementById('mainwindow');
    
    if (canvas && canvas.style.display === 'inline-block') {
        console.log('Game canvas is visible');
        return true;
    }
    return false;
}

// Modified download success handler
window.onDownloadComplete = function() {
    document.getElementById('downloadOverlay').classList.add('hidden');
    launchQuake();
};
</script>
<div id="end" style="color: white; font-family: monospace; text-align: center;">
<span id="end1" style="display: none;">                QUAKE: The Doomed Dimension <span style="color: yellow;">by <span style="background-color: navy;">id</span> Software               <span style="color: gray;">v1.09</span>  
  ----------------------------------------------------------------------------  
           CALL 1-800-IDGAMES TO ORDER OR FOR TECHNICAL SUPPORT                 
             PRICE: $45.00 (PRICES MAY VARY OUTSIDE THE US.)                    
                                                                                
  Yes! You only have one fourth of this incredible epic. That is because most   
   of you have paid us nothing or at most, very little. You could steal the     
   game from a friend. But we both know you'll be punished by God if you do.    
        <span style="color: yellow;">WHY RISK ETERNAL DAMNATION? CALL 1-800-IDGAMES AND BUY NOW!</span>             
             Remember, we love you almost as much as He does.                   
                                                                                
            <span style="color: yellow;">Programming:</span> John Carmack, Michael Abrash, John Cash                
       <span style="color: yellow;">Design:</span> John Romero, Sandy Petersen, American McGee, Tim Willits         
                     <span style="color: yellow;">Art:</span> Adrian Carmack, Kevin Cloud                           
               <span style="color: yellow;">Biz:</span> Jay Wilbur, Mike Wilson, Donna Jackson                      
            <span style="color: yellow;">Projects:</span> Shawn Green   <span style="color: yellow;">Support:</span> Barrett Alexander                  
              <span style="color: yellow;">Sound Effects:</span> Trent Reznor and Nine Inch Nails                   
  For other information or details on ordering outside the US, check out the    
     files accompanying QUAKE or our website at http://www.idsoftware.com.      
    <span style="color: gray;">Quake is a trademark of Id Software, inc., (c)1996 Id Software, inc.        
     All rights reserved. NIN logo is a registered trademark licensed to        
                 Nothing Interactive, Inc. All rights reserved.</span>                 </span>
<span id="end2" style="display: none;">        QUAKE <span style="color: yellow;">by <span style="background-color: navy;">id</span> Software                                             <span style="color: white;">v1.09</span>  
 -----------------------------------------------------------------------------  </span>
        Why did you quit from the registered version of QUAKE? Did the          
        scary monsters frighten you? Or did Mr. Sandman tug at your             
        little lids? No matter! What is important is you love our               
        game, and gave us your money. Congratulations, you are probably         
        not a thief.                                                            
                                                           Thank You.           
        <span style="color: yellow;"><span style="background-color: navy;">id</span> Software is:                                                         
        PROGRAMMING:</span> John Carmack, Michael Abrash, John Cash                    
        <span style="color: yellow;">DESIGN:</span> John Romero, Sandy Petersen, American McGee, Tim Willits        
        <span style="color: yellow;">ART:</span> Adrian Carmack, Kevin Cloud                                        
        <span style="color: yellow;">BIZ:</span> Jay Wilbur, Mike Wilson     <span style="color: yellow;">PROJECTS MAN:</span> Shawn Green              
        <span style="color: yellow;">BIZ ASSIST:</span> Donna Jackson        <span style="color: yellow;">SUPPORT:</span> Barrett Alexander             
        <span style="color: yellow;">SOUND EFFECTS AND MUSIC:</span> Trent Reznor and Nine Inch Nails               
                                                                                
        If you need help running QUAKE refer to the text files in the           
        QUAKE directory, or our website at http://www.idsoftware.com.           
        If all else fails, call our technical support at 1-800-IDGAMES.         
      <span style="color: silver">Quake is a trademark of Id Software, inc., (c)1996 Id Software, inc.      
        All rights reserved. NIN logo is a registered trademark licensed        
             to Nothing Interactive, Inc. All rights reserved.</span>                  </span>
</div>
<canvas id="mainwindow" width="800" height="600"></canvas>
<img id="loading" alt="Loading" style="display: none; position: fixed;">
<div id="progress" style="display: none; position: fixed;"></div>
</div>
<script type="text/javascript" src="WebQuake/CDAudio.js"></script>
<script type="text/javascript" src="WebQuake/Chase.js"></script>
<script type="text/javascript" src="WebQuake/CL.js"></script>
<script type="text/javascript" src="WebQuake/Cmd.js"></script>
<script type="text/javascript" src="WebQuake/COM.js"></script>
<script type="text/javascript" src="WebQuake/Console.js"></script>
<script type="text/javascript" src="WebQuake/CRC.js"></script>
<script type="text/javascript" src="WebQuake/Cvar.js"></script>
<script type="text/javascript" src="WebQuake/Def.js"></script>
<script type="text/javascript" src="WebQuake/Draw.js"></script>
<script type="text/javascript" src="WebQuake/ED.js"></script>
<script type="text/javascript" src="WebQuake/GL.js"></script>
<script type="text/javascript" src="WebQuake/Host.js"></script>
<script type="text/javascript" src="WebQuake/IN.js"></script>
<script type="text/javascript" src="WebQuake/Key.js"></script>
<script type="text/javascript" src="WebQuake/M.js"></script>
<script type="text/javascript" src="WebQuake/Mod.js"></script>
<script type="text/javascript" src="WebQuake/MSG.js"></script>
<script type="text/javascript" src="WebQuake/NET.js"></script>
<script type="text/javascript" src="WebQuake/NET_Loop.js"></script>
<script type="text/javascript" src="WebQuake/NET_WEBS.js"></script>
<script type="text/javascript" src="WebQuake/PF.js"></script>
<script type="text/javascript" src="WebQuake/PR.js"></script>
<script type="text/javascript" src="WebQuake/Protocol.js"></script>
<script type="text/javascript" src="WebQuake/Q.js"></script>
<script type="text/javascript" src="WebQuake/R.js"></script>
<script type="text/javascript" src="WebQuake/S.js"></script>
<script type="text/javascript" src="WebQuake/Sbar.js"></script>
<script type="text/javascript" src="WebQuake/SCR.js"></script>
<script type="text/javascript" src="WebQuake/SV.js"></script>
<script type="text/javascript" src="WebQuake/Sys.js"></script>
<script type="text/javascript" src="WebQuake/SZ.js"></script>
<script type="text/javascript" src="WebQuake/V.js"></script>
<script type="text/javascript" src="WebQuake/Vec.js"></script>
<script type="text/javascript" src="WebQuake/VID.js"></script>
<script type="text/javascript" src="WebQuake/W.js"></script>
<script type="x-shader/x-vertex" id="vshAlias">
uniform vec3 uOrigin;
uniform mat3 uAngles;
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
uniform vec3 uLightVec;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
varying vec2 vTexCoord;
varying float vLightDot;
void main(void)
{
        vec3 position = uViewAngles * (uAngles * aPosition + uOrigin - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vTexCoord = aTexCoord;
        vLightDot = dot(aNormal, uLightVec);
}
</script>
<script type="x-shader/x-fragment" id="fshAlias">
precision mediump float;
uniform float uGamma;
uniform float uAmbientLight;
uniform float uShadeLight;
uniform sampler2D tTexture;
varying vec2 vTexCoord;
varying float vLightDot;
void main(void)
{
        vec4 texture = texture2D(tTexture, vTexCoord);
        gl_FragColor = vec4(texture.rgb * mix(1.0, vLightDot * uShadeLight + uAmbientLight, texture.a), 1.0);
        gl_FragColor.r = pow(gl_FragColor.r, uGamma);
        gl_FragColor.g = pow(gl_FragColor.g, uGamma);
        gl_FragColor.b = pow(gl_FragColor.b, uGamma);
}
</script>
<script type="x-shader/x-vertex" id="vshBrush">
uniform vec3 uOrigin;
uniform mat3 uAngles;
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
attribute vec3 aPosition;
attribute vec4 aTexCoord;
attribute vec4 aLightStyle;
varying vec4 vTexCoord;
varying vec4 vLightStyle;
void main(void)
{
        vec3 position = uViewAngles * (uAngles * aPosition + uOrigin - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vTexCoord = aTexCoord;
        vLightStyle = aLightStyle;
}
</script>
<script type="x-shader/x-fragment" id="fshBrush">
precision mediump float;
uniform float uGamma;
uniform sampler2D tTexture;
uniform sampler2D tLightmap;
uniform sampler2D tDlight;
uniform sampler2D tLightStyle;
varying vec4 vTexCoord;
varying vec4 vLightStyle;
void main(void)
{
        vec4 texture = texture2D(tTexture, vTexCoord.xy);
        gl_FragColor = vec4(texture.rgb *
                mix(1.0, dot(texture2D(tLightmap, vTexCoord.zw), vec4(
                        texture2D(tLightStyle, vec2(vLightStyle.x, 0.0)).a,
                        texture2D(tLightStyle, vec2(vLightStyle.y, 0.0)).a,
                        texture2D(tLightStyle, vec2(vLightStyle.z, 0.0)).a,
                        texture2D(tLightStyle, vec2(vLightStyle.w, 0.0)).a)
                * 43.828125) + texture2D(tDlight, vTexCoord.zw).a, texture.a), 1.0);
        gl_FragColor.r = pow(gl_FragColor.r, uGamma);
        gl_FragColor.g = pow(gl_FragColor.g, uGamma);
        gl_FragColor.b = pow(gl_FragColor.b, uGamma);
}
</script>
<script type="x-shader/x-vertex" id="vshCharacter">
uniform vec2 uCharacter;
uniform vec2 uDest;
uniform mat4 uOrtho;
attribute vec2 aPosition;
varying vec2 vTexCoord;
void main(void)
{
        gl_Position = uOrtho * vec4(aPosition * 8.0 + uDest, 0.0, 1.0);
        vTexCoord = (aPosition + uCharacter) * 0.0625;
}
</script>
<script type="x-shader/x-fragment" id="fshCharacter">
precision mediump float;
uniform sampler2D tTexture;
varying vec2 vTexCoord;
void main(void)
{
        gl_FragColor = texture2D(tTexture, vTexCoord);
}
</script>
<script type="x-shader/x-vertex" id="vshDlight">
uniform vec3 uOrigin;
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
uniform float uRadius;
attribute vec3 aPosition;
varying float vAlpha;
void main(void)
{
        vec3 position = aPosition * 0.35 * uRadius + uViewAngles * (uOrigin - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vAlpha = aPosition.y * -0.2;
}
</script>
<script type="x-shader/x-fragment" id="fshDlight">
precision mediump float;
uniform float uGamma;
varying float vAlpha;
void main(void)
{
        gl_FragColor = vec4(pow(1.0, uGamma), pow(0.5, uGamma), 0.0, vAlpha);
}
</script>
<script type="x-shader/x-vertex" id="vshFill">
uniform mat4 uOrtho;
attribute vec2 aPosition;
attribute vec4 aColor;
varying vec4 vColor;
void main(void)
{
        gl_Position = uOrtho * vec4(aPosition, 0.0, 1.0);
        vColor = aColor;
}
</script>
<script type="x-shader/x-fragment" id="fshFill">
precision mediump float;
varying vec4 vColor;
void main(void)
{
        gl_FragColor = vColor;
}
</script>
<script type="x-shader/x-vertex" id="vshParticle">
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
uniform float uScale;
attribute vec3 aOrigin;
attribute vec2 aCoord;
attribute float aScale;
attribute vec3 aColor;
varying vec2 vCoord;
varying vec3 vColor;
void main(void)
{
        vec2 point = aCoord * aScale;
        vec3 position = vec3(point.x, 0.0, point.y) + uViewAngles * (aOrigin - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vCoord = aCoord;
        vColor = aColor;
}
</script>
<script type="x-shader/x-fragment" id="fshParticle">
precision mediump float;
uniform float uGamma;
varying vec2 vCoord;
varying vec3 vColor;
void main(void)
{
        gl_FragColor = vec4(vColor, 1.0 - smoothstep(0.75, 1.0, length(vCoord)));
        gl_FragColor.r = pow(gl_FragColor.r, uGamma);
        gl_FragColor.g = pow(gl_FragColor.g, uGamma);
        gl_FragColor.b = pow(gl_FragColor.b, uGamma);
}
</script>
<script type="x-shader/x-vertex" id="vshPic">
uniform mat4 uOrtho;
attribute vec2 aPosition;
attribute vec2 aTexCoord;
varying vec2 vTexCoord;
void main(void)
{
        gl_Position = uOrtho * vec4(aPosition, 0.0, 1.0);
        vTexCoord = aTexCoord;
}
</script>
<script type="x-shader/x-fragment" id="fshPic">
precision mediump float;
uniform sampler2D tTexture;
varying vec2 vTexCoord;
void main(void)
{
        gl_FragColor = texture2D(tTexture, vTexCoord);
}
</script>
<script type="x-shader/x-vertex" id="vshPicTranslate">
uniform mat4 uOrtho;
attribute vec2 aPosition;
attribute vec2 aTexCoord;
varying vec2 vTexCoord;
void main(void)
{
        gl_Position = uOrtho * vec4(aPosition, 0.0, 1.0);
        vTexCoord = aTexCoord;
}
</script>
<script type="x-shader/x-fragment" id="fshPicTranslate">
precision mediump float;
uniform vec3 uTop;
uniform vec3 uBottom;
uniform sampler2D tTexture;
uniform sampler2D tTrans;
varying vec2 vTexCoord;
void main(void)
{
        vec4 texture = texture2D(tTexture, vTexCoord);
        vec4 trans = texture2D(tTrans, vTexCoord);
        gl_FragColor = vec4(mix(mix(texture.rgb, uTop * trans.x, trans.y), uBottom * trans.z, trans.w), texture.a);
}
</script>
<script type="x-shader/x-vertex" id="vshPlayer">
uniform vec3 uOrigin;
uniform mat3 uAngles;
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
uniform vec3 uLightVec;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
varying vec2 vTexCoord;
varying float vLightDot;
void main(void)
{
        vec3 position = uViewAngles * (uAngles * aPosition + uOrigin - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vTexCoord = aTexCoord;
        vLightDot = dot(aNormal, uLightVec);
}
</script>
<script type="x-shader/x-fragment" id="fshPlayer">
precision mediump float;
uniform float uGamma;
uniform float uAmbientLight;
uniform float uShadeLight;
uniform vec3 uTop;
uniform vec3 uBottom;
uniform sampler2D tTexture;
uniform sampler2D tPlayer;
varying vec2 vTexCoord;
varying float vLightDot;
void main(void)
{
        vec4 texture = texture2D(tTexture, vTexCoord);
        vec4 player = texture2D(tPlayer, vTexCoord);
        gl_FragColor = vec4(
                mix(mix(texture.rgb, uTop * (1.0 / 191.25) * player.x, player.y), uBottom * (1.0 / 191.25) * player.z, player.w)
                * mix(1.0, vLightDot * uShadeLight + uAmbientLight, texture.a), 1.0);
        gl_FragColor.r = pow(gl_FragColor.r, uGamma);
        gl_FragColor.g = pow(gl_FragColor.g, uGamma);
        gl_FragColor.b = pow(gl_FragColor.b, uGamma);
}
</script>
<script type="x-shader/x-vertex" id="vshSky">
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
uniform vec3 uScale;
attribute vec3 aPosition;
varying vec2 vTexCoord;
void main(void)
{
        vec3 position = uViewAngles * (aPosition * uScale * 18918.0);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
        vTexCoord = aPosition.xy * uScale.xy * 1.5;
}
</script>
<script type="x-shader/x-fragment" id="fshSky">
precision mediump float;
uniform float uGamma;
uniform vec2 uTime;
uniform sampler2D tSolid;
uniform sampler2D tAlpha;
varying vec2 vTexCoord;
void main(void)
{
        vec4 alpha = texture2D(tAlpha, vTexCoord + uTime.x);
        gl_FragColor = vec4(mix(texture2D(tSolid, vTexCoord + uTime.y).rgb, alpha.rgb, alpha.a), 1.0);
        gl_FragColor.r = pow(gl_FragColor.r, uGamma);
        gl_FragColor.g = pow(gl_FragColor.g, uGamma);
        gl_FragColor.b = pow(gl_FragColor.b, uGamma);
}
</script>
<script type="x-shader/x-vertex" id="vshSkyChain">
uniform vec3 uViewOrigin;
uniform mat3 uViewAngles;
uniform mat4 uPerspective;
attribute vec3 aPosition;
void main(void)
{
        vec3 position = uViewAngles * (aPosition - uViewOrigin);
        gl_Position = uPerspective * vec4(position.xz, -position.y, 1.0);
}
</script>
<script type="x-shader/x-fragment" id="fshSkyChain">
precision mediump float;
void main(void)
{
}
</script>
</body>
</html>